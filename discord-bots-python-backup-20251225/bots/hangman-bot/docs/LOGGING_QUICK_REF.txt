# Hangman Bot - Logging Quick Reference

## What's Been Added

✅ **Comprehensive logging system integrated into src/core/__main__.py**
✅ **All errors caught with try-except blocks**
✅ **Logs stored in logs/ directory**
✅ **Two log files: main + errors only**

## How to Check Logs

### View Recent Activity
```bash
tail -20 logs/hangman.log
```

### View Only Errors
```bash
cat logs/hangman.error.log
```

### Watch in Real-Time
```bash
tail -f logs/hangman.log
```

## What Gets Logged

### Commands
- `/hangman start` - When user starts a game
- `/hangman join` - When user joins a game
- `/hangman guess` - When user guesses a letter
- `/leave` - When user leaves the game
- `/games` - When user lists active games

### Game Events
- Player joins game
- Letter guessed (correct/incorrect)
- Game won
- Game lost
- Player left
- Game abandoned

### Errors (All of them!)
- Discord API errors
- Game logic errors
- OpenAI API errors
- Input validation errors
- Unexpected exceptions

## Log File Locations

```
logs/
├── hangman.log           (all events, DEBUG level)
└── hangman.error.log     (errors only, ERROR level)
```

Created automatically when bot runs.

## Example Log Entries

**Game Start**
```
INFO - 2024-01-15 14:23:45 - Command: hangman start | User: 123456789 | @username
DEBUG - 2024-01-15 14:23:46 - Game started: channel=456789, word=python, starter=123456789
DEBUG - 2024-01-15 14:23:47 - OpenAI API: hint generation | status=success
```

**Player Join**
```
DEBUG - 2024-01-15 14:24:10 - Game action: player_joined | channel=456789 | player=987654321
```

**Letter Guess**
```
DEBUG - 2024-01-15 14:24:20 - Game action: guess | channel=456789 | player=123456789 | letter=e,correct=true
```

**Error**
```
ERROR - 2024-01-15 14:25:00 - Context: hangman_command guess action
ERROR - 2024-01-15 14:25:00 - Traceback: [Full error details here]
```

## Debugging Tips

### Find what a user did
```bash
grep "123456789" logs/hangman.log
```

### Find specific game
```bash
grep "channel=456789" logs/hangman.log
```

### Find all errors for a command
```bash
grep -i "start" logs/hangman.error.log
```

### Count how many games started
```bash
grep "game_started" logs/hangman.log | wc -l
```

### See all failures
```bash
grep -i "failed" logs/hangman.log
```

## Integration Points

**Bot Startup**
```python
log_startup()  # Logs when bot starts
```

**Command Execution**
```python
log_command("hangman start", user_id, user_name)
```

**Game Events**
```python
log_game_start(channel_id, word, starter_id)
log_game_action(channel_id, "player_joined", player_id)
log_game_action(channel_id, "guess", player_id, f"letter={letter},correct={is_correct}")
log_game_end(channel_id, "won", word)
```

**API Calls**
```python
log_api_call("OpenAI hint generation", "success", f"word={word}")
```

**Errors**
```python
except Exception as e:
    log_error_traceback(e, "context_name")
```

## Error Handling Coverage

- ✅ Start command (3 validation points)
- ✅ Join command (2 validation points)
- ✅ Guess command (3 validation points)
- ✅ Leave command (1 validation point)
- ✅ Games command (1 validation point)
- ✅ API calls (1 error handling)
- ✅ Bot startup (1 error handling)
- ✅ Bot runtime (1 error handling)

**Total**: 8 try-except blocks, 12+ validation checks

## Start the Bot

```bash
python -m src.core
```

Then check logs:
```bash
ls -la logs/
tail logs/hangman.log
```

## Quick Troubleshooting

**Bot won't start?**
→ Check `logs/hangman.error.log` for startup error

**Command not working?**
→ Search logs: `grep "command_name" logs/hangman.log`

**Game error?**
→ Check error log: `tail logs/hangman.error.log`

**Want to see all activity?**
→ `cat logs/hangman.log`

**Want to monitor live?**
→ `tail -f logs/hangman.log`

## Key Files Modified

- `src/core/__main__.py` - Added comprehensive logging throughout
- `src/core/logger.py` - Logging infrastructure (created earlier)

## Total Logging Coverage

- **Helper Functions**: 9 logging functions
- **Try-Except Blocks**: 8 error handlers
- **Validation Checks**: 12+ logged failures
- **Log Files**: 2 (main + errors)
- **Logging Points**: 15+ integration points

---

**Status**: ✅ COMPLETE - Ready to debug any issues!
